<!DOCTYPE html>
<!-- saved from url=(0066)file:///C:/Users/Thomas/Desktop/sql-injection/templates/login.html -->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
    <title>SQL Injection</title>
</head>
<body>
    <h1 style="text-align:center;margin-bottom:0px">SQL Injection (by Period 8's Team uWu)</h1>
    <h4 style="text-align:center;margin-top:0px">Hui Min Wu and Thomas Zhao</h4>
    <hr>

    <style>
    .question {
        font-size: 25px;
        font-style: italic;
        font-weight: bold;
        margin-bottom: 5px;
        text-align: center;
    }

    .answer {
        font-size: 18px;
        margin-top: 0px;
        margin-bottom: 30px;
        padding-left: 80px;
        padding-right: 80px;
        text-align:justify;
    }

    .answer-list {
        font-size: 18px;
        margin-bottom: 30px;
        padding-left: 120px;
    }

    .demo {
        font-size: 20px;
        font-family: Lucida Console;
    }

    /* Tooltip container */
    .tooltip {
        position: relative;
        display: inline-block;
        border-bottom: 1px dotted black; /* If you want dots under the hoverable text */
    }

    /* Tooltip text */
    .tooltip .tooltiptext {
        visibility: hidden;
        width: 120px;
        background-color: black;
        color: #fff;
        text-align: center;
        padding: 5px 0;
        border-radius: 6px;

        /* Position the tooltip text - see examples below! */
        position: absolute;
        z-index: 1;
    }

    /* Show the tooltip text when you mouse over the tooltip container */
    .tooltip:hover .tooltiptext {
        visibility: visible;
        width: 200px;
        bottom: 100%;
        left: 50%;
        margin-left: -60px; /* Use half of the width (120/2 = 60), to center the tooltip */
    }

    .tooltip .tooltiptext::after {
        content: " ";
        position: absolute;
        top: 100%; /* At the bottom of the tooltip */
        left: 50%;
        margin-left: -5px;
        border-width: 5px;
        border-style: solid;
        border-color: black transparent transparent transparent;
    }

    </style>

    <div style="text-align:center">
        <h3> TABLE OF CONTENTS </h3>
        <a href="#q1">What is SQL Injection?</a><br>
        <a href="#q2">Dangers of SQL Injection</a><br>
        <a href="#q3">What makes you prone to SQL Injection?</a><br>
        <a href="#q4">Past examples of SQL Injection</a><br>
        <a href="#q5">Introducing the three types of SQL Injection</a><br>
        <a href="#q6">Error-based</a><br>
        <a href="#q7">Union-based</a><br>
        <a href="#q8">Inferential (a.k.a. blind)</a><br>
        <a href="#q9">Prevention</a><br>
        <a href="#q10">Demo 1</a><br>
        <a href="#q11">Demo 2</a><br>
        <a href=#q12>Signing off</a><br>
    </div>

    <br>
    <hr>

    <p class="question" id="q1">
        Hey uWu, what is SQL Injection?
    </p>
    <p class="answer">
        SQL Injection is the act of "injecting" SQL queries to manipulate web applications. These are important to guard against because they
        are an ubiquitous attack on the Interwebs due to their relative simplicity to perform, and the volume of web applications that are
        vulnerable to said attack. SQL Injection attacks thrive on text input fields, which nowadays the majority of websites possess.
        Text input fields are generally connected to a database so that the input can somehow be used to procure some sort of result. One
        would use SQL code to access and compare the input and stored data in the database. If someone typed in SQL code as the input (hence
        "SQL Injection"), it could potentially alter the original SQL query into a malicious one capable of performing whatever action the
        attacker sees fit.
    </p>

    <p class="question" id="q2">
        Hmm, interesting. I still don't see how bad SQL Injection can be though.
    </p>
    <p class="answer">
        Giving attackers the potential to gain unparalleled power in YOUR web application? That is terrible and is something that should
        never happen. Though severity varies depending on how the SQL backend code is structured, just the mere thought of a foreign
        entity being able to access YOUR web application, use it to their benefit, and even destroy it should scare you. If you are still
        not convinced, potential consequences of negligence are:
    </p><ul class="answer-list">

        <li id="consequence-1">
            <div class="tooltip">
                Modify database information.
                <span class="tooltiptext">And destroy the integrity of your web application!</span>
            </div>
        </li>
        <li id="consequence-2">
            <div class="tooltip">
                Gain administrative priviledges.
                <span class="tooltiptext">Really bad. They could usurp your throne.</span>
            </div>
        </li>
        <li id="consequence-3">
            <div class="tooltip">
                Delete entire database tables or corrupt data.
                <span class="tooltiptext">Again, destroying your web application's precious integrity.</span>
            </div>
        </li>
        <li id="consequence-4">
            <div class="tooltip">
                Attack other related online services one provides.
                <span class="tooltiptext">And bring your empire crashing down!</span>
            </div>
        </li>
        <li id="consequence-5">
            <div class="tooltip">
                Procure sensitive information.
                <span class="tooltiptext">And discover your secrets!</span>
            </div>
        </li>
        <li id="consequence-6">
            <div class="tooltip">
                Destroy even backup files.
                <span class="tooltiptext">You're so done for if it comes to this.</span>
            </div>
        </li>
    </ul>
    <p></p>

    <p class="question" id="q3">
        Okay, that sounds pretty terrifying. How do I know if I'll be attacked?
    </p>
    <p class="answer">
        Well, you see, you don't know for sure. But it is likely because again SQL Injection attacks are extremely common on the
        Interwebs. However, there are some factors that will put you more at risk than others (some of which can control, some of
        which you cannot). Some factors that put you at a greater risk are listed below:
    </p><ul class="answer-list">

        <li id="risk-1">
            <div class="tooltip">
                Your business is more lucrative to attack.
                <span class="tooltiptext">Someone would rather attack MasterCard than, let's say, your SoftDev project.</span>
            </div>
        </li>

        <li id="risk-2">
            <div class="tooltip">
                Your web application is large, but is not updated or patched often.
                <span class="tooltiptext">This leads to vulnerablities that can be exploited.</span>
            </div>
        </li>

        <li id="risk-3">
            <div class="tooltip">
                There are insufficient checks on invalid user inputs that would prevent nefarious activities on your web application.
                <span class="tooltiptext">Without checks/sanitization, users can enter in potentially malicious input.</span>
            </div>
        </li>
    </ul>
    <p></p>

    <p class="question" id="q4">
        Wow. Just wow. Has this attack been successful in years past?
    </p>
    <p class="answer">
        Why, of course! Otherwise, why would we stress the dangers of succumbing to SQL Injection? There have been numerous examples
        down the long roads of history; here are a couple of notable cases that have emerged in (relatively) recent years.
    </p><ul class="answer-list">
        <li id="past-1">
            <div class="tooltip">
                <a href="https://www.bbc.com/news/technology-23448639">"Largest Ever Hacking Fraud Case", 2013</a>
                <span class="tooltiptext">Five men in Russia and Ukraine have been charged with running a hacking operation that allegedly stole more than 160 million credit and debit card numbers from a number of major US companies over a period of seven years.</span>
            </div>
        </li>
        <li id="past-2">
            <div class="tooltip">
                <a href="https://arstechnica.com/information-technology/2015/07/uk-man-accused-of-hacking-spree-on-us-government-is-arrested-again/">"Lauri Love", 2013</a>
                <span class="tooltiptext">Lauri Love was arrested in October 2013 on charges he and associates hacked into networks operated by the US Army, the US Missile Defense Agency, NASA, the Environmental Protection Agency, and other US government agencies.</span>
            </div>
        </li>
    </ul>
    <p></p>

    <p class="question" id="q5">
        Amazing. Are there different types of SQL Injection attacks or something?
    </p>
    <p class="answer">
        I'm glad you asked! SQL Injection attacks number very high, and there can therefore be many types of SQL Injection attacks.
        However, we have distinguished three main types for you today: error-based, union-based, and inferential (a.k.a. blind).
    </p>

    <p class="question" id="q6">
        Error-based attacks, huh? Sounds cool. What is it?
    </p>
    <p class="answer">In error-based SQL Injection attacks, the primary goal of the attacker is to flush out weakpoints in the code design by purposefully
        typing in bad input. In doing so, the program may be forced to throw out an error due to a lack of parameter sanization. When this happens,
        the attacker can usually glean information about the program's backend and becomes more knowledgable in hacking the program.
    </p>

    <p class="question" id="q7">
        Hmm, I see. What about union-based attacks? Does it use nuclear fusion or something?
    </p>
    <p class="answer">
        Nah, though it would be amazing if there were fusion-powered hacking efforts (or maybe not, depending on your perspective).
        Union-based attacks is all about adding additonal queries to the existing query in the program. This is a very powerful attack if it is not
        caught by the programmer's code it gives the attacker essentially free reign over the application by appending any additional queries the attacker wishes.
        Some possible appendations include: insert, delete, and select.
    </p>

    <p class="question" id="q8">
        Muy interesante! The best for last, eh? Tell me about inferential (a.k.a. blind) attacks!
    </p>
    <p class="answer">
        Inferential SQL Injection attacks are off the premise that the programmer has supressed detailed error messages but has not
        dealt with the underlying issue; only merely hiding it. Attackers no longer have long details from the error, but they can still
        glean information from the little errors that the program will show. Inferential SQL Injection is based off of a series of true/false
        questions. Attackers can input a comparison ('1' = '1') or a time delay ( sleep() function) and they can thereby glean the results
        of these true/false inquiries, procuring knowledge on the program's structure.
    </p>

    <p class="question" id="q9">
        Dang. How will I ever be able to stop these attacks? They seem so powerful!
    </p>
    <p class="answer">
        SQL Injections can be powerful weapons against those who are negligent and not cautious. But you are not that person anymore
        (no clue if you were to begin with, but doesn't matter!). Because you do not want SQL Injections to have the possible effects
        that they could, here is what you can do to prevent (or at least, lessen the impact of) SQL Injection attacks.

    </p><ul class="answer-list">
        <li id="prevent-1">
            <div class="tooltip">
                Sanitize user input first.
                <span class="tooltiptext">This way, potentially malicious code will be blocked from going through.</span>
            </div>
        </li>
        <li id="prevent-2">
            <div class="tooltip">
                Use parameters rather than building SQL command explicitly.
                <span class="tooltiptext">Parameters help safeguard against unintended consequences of some inputs.</span>
            </div>
        </li>
        <li id="prevent-3">
            <div class="tooltip">
                Avoid dynamic SQL code as much as possible (building SQL code piece by piece).
                <span class="tooltiptext">Building the command explicitly is highly vulnerable because each piece of the command can potentially be manipulated.</span>
            </div>
        </li>
        <li id="prevent-4">
            <div class="tooltip">
                Hide your error messages from the outside world.
                <span class="tooltiptext">Hiding these things will make it harder for attackers to know your backend structure, and therefore harder to hack.</span>
            </div>
        </li>
    </ul>
    <p></p>

    <p class="question" id="q10">
        Wowzers. Can I see an example of this?
    </p>
    <p class="answer">
        Sure. Have a look below. Here, the backend code of the SQL query is displayed to help understanding
        of why the application behaves the way it does. Notice how when you type in input, there is JavaScript that will update the
        SQL command to reflect what goes into the program. The only user on this is the administrator with the username and password of
        <i>admin</i> and <i>password</i>, respectively. You can definitely login with that pair of username and password. But, obviously, you are not going to know what the user credentials
        are.
    </p>
    <p class="answer">
        Now, try typing in the following: <i> ' OR '1' = '1'-- </i> as the username and anything as the password.
    </p>
    <p class="answer">
        As you can see, that works too! What this input effectively does is that it closes the first single quote, and creates an "or"
        statement that is always true ('1' is always equal to '1'). The double hyphens at the end is SQL's syntax for a comment; it will
        comment out any SQL code that comes after it. So you are effectively left with a SQL query that will register as true, thereby
        bypassing the login system.
    </p>

    <p style="text-align:center">
        {% with messages = get_flashed_messages() %}
        {% if messages %}
        {% for message in messages %}
        {{message}}
        {% endfor %}
        {% endif %}
        {% endwith %}
    </p>
    <center>
        <form action="/auth" method="POST">
            Username: <input type="text" name="username" id="usernameinput"><br>
            Password: <input type="text" name="password" id="passwordinput"><br>
            <button type="submit">Login</button>
        </form>
    </center>

    <br><br>

    <text style="font-size:30px;margin-left:80px">The SQL Command</text>

    <br><br>

    <div class="demo" id="q11">
        <text style="margin-left:80px">SELECT</text>
        <br>
        <text style="margin-left:120px">CASE</text>
        <br>
        <text style="margin-left:160px">WHEN COUNT (name) &gt;= 1 THEN CAST (1 AS BIT)</text>
        <br>
        <text style="margin-left:120px">ELSE</text>
        <br>
        <text style="margin-left:160px">CAST (0 AS BIT)</text>
        <br>
        <text style="margin-left:120px">END AS isItValid</text>
        <br>
        <text style="margin-left:120px">FROM users WHERE users.name =</text>

        <br>
        <text style="margin-left:160px">'</text>
        <text style="margin-left:80px;color:red" id="user"></text>
        <text style="margin-left:80px">'</text>
        <br>
        <text style="margin-left:120px">AND users.pwd =</text>
        <br>
        <text style="margin-left:160px">'</text>
        <text style="margin-left:80px;color:red" id="pass"></text>
        <text style="margin-left:80px">'</text>
    </div>
    <br><br><br>

    <p class="question">
        Dang. That's fascinating but scary simutaneously. May I have another example?
    </p>
    <p class="answer">
        Glad you asked. Here is an example. This search box will allow you to search things in only the table known as
        <i>public_info</i>. The only two searchable items are the terms "airpods" and "iPhone". Go ahead, try it.
    </p>
    <p class="answer">
        Say you know that there is a table called <i>classified</i> and you would like to see its contents. But the search
        query programmed into the search box only searches through the <i>public_info</i> table. We can input the following
        into the search input to procure data from the <i>classified</i> table:
    </p>
    <p class="answer">
        <i>' UNION SELECT * FROM classified--</i>
    </p>
    <p class="answer">
        What this does is that it combines the results from the two select statements. Because we specified that we
        would like to see everything in <i>classified</i>, we combined the program's select statement with our own
        select statement through the UNION operator. The two hyphens comment out the extra SQL code.
    </p>

    <text style="font-size:30px;margin-left:80px">The SQL Command</text>
    <br><br>

    <div class="demo">
        <text style="margin-left:80px">SELECT * from public_info WHERE file_name LIKE '</text>
        <text style="margin-left:0px;color:red" id="search_term"></text>
        <text style="margin-left:-10px">%  '</text>
    </div>

    <p style="text-align:center">
        {% with messages = get_flashed_messages() %}
        {% if messages %}
        {% for message in messages %}
        {{message}}
        {% endfor %}
        {% endif %}
        {% endwith %}
    </p>

    <center>
        <form action="/auth_2" method="POST">
            <input type="text" name="search" id="searchinput">
            <button type="submit">Search!</button>
        </form>
    </center>

    <br><br><br>

    <p class="question" id="q12">
        Thank you for introducing to me the basic concepts behind SQL Injection.
    </p>
    <p class="answer">
        You are very welcome. Hope that great learnation occurred in the time spent together. SQL Injection is a very
        real threat to many web applications, and it is imperative that one safeguards programs from this. Team uWu, signing off.
    </p>

    <br><br><br>

    <script src="static/showSQLcmd.js"></script>


</body>
</html>
